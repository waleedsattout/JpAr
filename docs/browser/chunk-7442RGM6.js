import{a as K}from"./chunk-7543GSZT.js";import{a as q}from"./chunk-WRKAA74T.js";import{f as N,g as R,i as L,k as Q,l as d,m as W,n as z,o as p,p as U,q as G,r as H,ya as J}from"./chunk-Z23VTVCW.js";import{$ as S,Aa as w,Ea as y,Gb as V,Hb as j,Ib as F,Oa as f,Qa as s,Sa as u,Ta as l,Ua as _,Va as k,W as h,Wa as M,Xa as O,Ya as P,Za as x,_a as m,bb as D,cb as E,db as A,eb as b,fb as c,gb as I,ha as C,ia as v,jb as T,kb as B,za as o}from"./chunk-OYZL6AD4.js";var X=["snackBar"];function Y(e,i){e&1&&_(0,"div",4)}function Z(e,i){e&1&&_(0,"img",18)}function $(e,i){if(e&1){let n=P();u(0,"div",5),f(1,Z,1,0,"img",6),u(2,"div",7)(3,"app-avatarpicker",8),x("imagePicked",function(t){C(n);let a=m();return v(a.handlePickingImage(t))}),l(),u(4,"form",9),x("submit",function(t){C(n);let a=m();return v(a.onSubmit(t))}),_(5,"mdui-text-field",10)(6,"mdui-text-field",11)(7,"mdui-text-field",12)(8,"mdui-text-field",13),u(9,"mdui-button",14),c(10,"\u062A\u0633\u062C\u064A\u0644"),l()(),u(11,"div",15)(12,"p"),c(13," \u0644\u062F\u064A\u0643 \u062D\u0633\u0627\u0628 \u0645\u0633\u0628\u0642\u0627\u064B\u061F "),l(),u(14,"a",16)(15,"mdui-button",17),c(16,"\u0633\u062C\u0644 \u062F\u062E\u0648\u0644\u0643"),l()()()()()}if(e&2){let n=m();o(),s("ngIf",n.mediumScreen&&!n.imageSelected||n.largeScreen),o(4),s("formControl",n.firstname),o(),s("formControl",n.lastname),o(),s("formControl",n.username),o(),s("formControl",n.password)}}function ee(e,i){e&1&&O(0)}function te(e,i){if(e&1&&(k(0),u(1,"mdui-card",19),f(2,ee,1,0,"ng-container",20),l(),M()),e&2){m();let n=b(2);o(2),s("ngTemplateOutlet",n)}}var fe=(()=>{let i=class i{constructor(r){this.renderer=r,this.username=new p("",[d.required,d.minLength(4)]),this.password=new p("",[d.required,d.minLength(4)]),this.firstname=new p(""),this.lastname=new p(""),this.snackbarContent="",this.backend=h(J),this.router=h(N),this.sharedData=h(q),this.smallScreen=!1,this.mediumScreen=!1,this.largeScreen=!1,this.imageSelected=!1}ngOnInit(){this.smallScreen=this.sharedData.innerWidth<=this.sharedData.smallScreenWidth,this.smallScreen?(this.renderer.addClass(document.querySelector("mdui-top-app-bar"),"bg-transparent"),this.renderer.addClass(document.body,"no-pad-body"),this.renderer.removeStyle(document.body,"padding-top")):this.sharedData.innerWidth>=1400?this.largeScreen=!0:this.mediumScreen=!0}handlePickingImage(r){this.imageSelected=!0,this.image=r}onSubmit(r){r.preventDefault(),!this.username.valid||!this.password.valid?(this.snackbarContent="\u064A\u062C\u0628 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",this.snackBar.nativeElement.open=!0,this.snackBar.nativeElement.autoCloseDelay=1500):this.backend.signup(this.username.value,this.password.value,this.image,this.firstname.value,this.lastname.value).then(t=>{t.code===201&&(this.backend.emitChange(t.message),this.backend.setLoginState(!0),this.router.navigateByUrl(""))})}};i.\u0275fac=function(t){return new(t||i)(w(y))},i.\u0275cmp=S({type:i,selectors:[["app-signup"]],viewQuery:function(t,a){if(t&1&&D(X,5),t&2){let g;E(g=A())&&(a.snackBar=g.first)}},standalone:!0,features:[T],decls:7,vars:4,consts:[["template",""],["snackBar",""],["class","bg-container",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"bg-container"],["id","signup"],["src","assets/signup.jpg","alt","signup",4,"ngIf"],[1,"col"],[3,"imagePicked"],[3,"submit"],["label","first name","helper-on-focus","","clearable","","placeholder","john","ngDefaultControl","","variant","outlined",2,"margin","12px 0",3,"formControl"],["label","last name","helper-on-focus","","clearable","","placeholder","smith","ngDefaultControl","","variant","outlined",2,"margin","12px 0 24px 0",3,"formControl"],["label","*username","helper","\u064A\u0646\u0628\u063A\u064A \u0623\u0646 \u062A\u0643\u0648\u0646 \u0623\u0643\u062B\u0631 \u0645\u0646 4 \u0623\u062D\u0631\u0641","helper-on-focus","","clearable","","placeholder","subarukun","ngDefaultControl","","variant","outlined",3,"formControl"],["label","*password","helper","\u064A\u0646\u0628\u063A\u064A \u0623\u0646 \u062A\u0643\u0648\u0646 \u0623\u0643\u062B\u0631 \u0645\u0646 4 \u0623\u062D\u0631\u0641","helper-on-focus","","toggle-password","","placeholder","strong password","type","password","ngDefaultControl","","variant","outlined",3,"formControl"],["type","submit"],[1,"register"],["routerLink","/login"],["variant","text"],["src","assets/signup.jpg","alt","signup"],["variant","elevated"],[4,"ngTemplateOutlet"]],template:function(t,a){if(t&1&&(f(0,Y,1,0,"div",2)(1,$,17,5,"ng-template",null,0,B)(3,te,3,1,"ng-container",3),u(4,"mdui-snackbar",null,1),c(6),l()),t&2){let g=b(2);s("ngIf",a.smallScreen),o(3),s("ngIf",a.smallScreen)("ngIfElse",g),o(3),I(a.snackbarContent)}},dependencies:[H,U,Q,W,z,G,L,R,F,V,j,K],styles:["mdui-top-app-bar[_ngcontent-%COMP%]{border-bottom:1px solid rgb(var(--mdui-color-surface-variant))}[_nghost-%COMP%]{display:grid;place-content:center;align-items:center;min-height:100vh;width:100%}mdui-button[_ngcontent-%COMP%]{margin:auto;width:fit-content;display:block}.register[_ngcontent-%COMP%]{display:flex;direction:rtl;justify-content:center;vertical-align:middle;align-items:center}.bg-container[_ngcontent-%COMP%]{background:url(/assets/signup.jpg);background-size:cover;position:absolute;inset:0;z-index:-1;filter:opacity(.25) blur(.5rem);background-position:center}mdui-card[_ngcontent-%COMP%]{padding:1.5rem}@media screen and (max-width:697px){#signup[_ngcontent-%COMP%]{margin:1rem auto}#signup[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{max-width:300px}img[_ngcontent-%COMP%]{max-width:350px;aspect-ratio:1/1;margin:0 auto 2.5rem;border-radius:4rem}}@media screen and (min-width:698px)and (max-width: 1399px){#signup[_ngcontent-%COMP%]{margin:1rem auto;max-width:350px}#signup[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{max-width:350px}img[_ngcontent-%COMP%]{max-width:350px;aspect-ratio:1/1;margin:0 auto 2.5rem;border-radius:4rem}}@media screen and (min-width:1400px){[_nghost-%COMP%]{height:calc(100% - 64px);overflow:hidden}#signup[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;height:100%}img[_ngcontent-%COMP%]{width:calc(50% - 4rem);max-height:calc(100% - 4rem - 64px);aspect-ratio:1/1;margin:2rem;border-radius:4rem}.col[_ngcontent-%COMP%]{margin:auto;width:25%}}"]});let e=i;return e})();export{fe as SignupComponent};
